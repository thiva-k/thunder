/**
 * Copyright (c) 2025, WSO2 LLC. (https://www.wso2.com).
 *
 * WSO2 LLC. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */

@use "../../styles/variables";

:root {
    --flow-builder-background-color: #f6f7f9;
    --flow-builder-background-color-dark: #141414;
    --flow-builder-background-pattern-color-props: var(--flow-builder-grey-200);
    --flow-builder-handle-background-colors: var(--flow-builder-grey-200);
    --flow-builder-handle-size: 10px;
}

.decorated-visual-flow {
    [data-color-scheme="light"] & {
        background-color: var(--flow-builder-background-color);
    }

    [data-color-scheme="dark"] & {
        background-color: var(--flow-builder-background-color-dark);
    }
    

    .react-flow {
        border-radius: 15px;
        --xy-edge-stroke: #d7d7d7;
        --xy-edge-stroke-width-default: 3;
        --xy-handle-height: var(--flow-builder-handle-size);
        --xy-handle-width: var(--flow-builder-handle-size);
        --xy-handle-top-default: 50%;
        --xy-handle-top-offset: var(--flow-builder-step-action-panel-height);
        --xy-handle-background-color: var(--flow-builder-handle-background-colors);
        --xy-handle-background-color-default: var(--flow-builder-grey-200);
        --xy-handle-border-color-default: var(--flow-builder-grey-400);
    }

    .react-flow {
        .react-flow__edges {
            z-index: 9999;
        }

        .react-flow__edge {
            &:hover {
                .react-flow__edge-path {
                    stroke: var(--mui-palette-primary-main);
                }

                .react-flow__handle {
                    border-color: var(--mui-palette-primary-main);
                }
            }
        }

        .react-flow__handle {
            height: var(--xy-handle-height);
            width: var(--xy-handle-width);
            border-width: var(--xy-handle-border-width-default);
            z-index: 9999;
            background: var(--xy-handle-background-color, var(--xy-handle-background-color-default));
            border: 1px solid var(--xy-handle-border-color, var(--xy-handle-border-color-default));

            &:hover {
                border-color: var(--mui-palette-primary-main);
            }
        }

        .react-flow__renderer {
            background-size: 8px 8px;
            background-image: radial-gradient(circle, var(--xy-background-pattern-color-props) 1px, transparent 1px);
        }

        .react-flow__edge-path {
            stroke: var(--xy-edge-stroke, var(--xy-edge-stroke-default));
            stroke-width: var(--xy-edge-stroke-width, var(--xy-edge-stroke-width-default));
        }

        .react-flow__controls-button {
            background: var(--xy-controls-button-background-color, var(--xy-controls-button-background-color-default));
            border-bottom: 1px solid var(--xy-controls-button-border-color-props, var(--xy-controls-button-border-color, var(--xy-controls-button-border-color-default)));
            color: var(--xy-controls-button-color-props, var(--xy-controls-button-color, var(--xy-controls-button-color-default)));
        }

        .custom-control-button {
            svg {
                fill: none;
            }
        }

        .flow-builder-step {
            box-shadow: 0px 4px 5px -2px rgba(0,0,0,0.2), 0px 7px 10px 1px rgba(0,0,0,0.14), 0px 2px 16px 1px rgba(0,0,0,0.12);
        }
    }
}
